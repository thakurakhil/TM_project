San Francisco drops case against transient who bashed ex-fire commish with crowbar, says it was 'self-defense'