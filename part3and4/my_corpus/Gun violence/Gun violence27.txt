A federal court has ruled that a law barring domestic-violence offenders from owning firearms is unconstitutional.